
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Class Hierarchies and Inheritance &#8212; Introduction to Computer Science II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '02_Inheritance/02_1_Inheritance';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Notifiers" href="02_2_Notifiers.html" />
    <link rel="prev" title="Objects" href="../01-Objects/01-1-Objects.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-provisional.png" class="logo__image only-light" alt="Introduction to Computer Science II - Home"/>
    <img src="../_static/logo-provisional.png" class="logo__image only-dark pst-js-only" alt="Introduction to Computer Science II - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction to Computer Science, part 2
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">00 Preliminaries</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-01-Prospectus.html">A Course in Computational Thinking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-02-Install.html">Installing Python and IDLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-03-Install_IDE.html">Installing an Interactive Development Environment (IDE)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">01 Objects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01-Objects/01-1-Objects.html">Objects</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">02 Inheritance</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Class Hierarchies and Inheritance</a></li>

<li class="toctree-l1"><a class="reference internal" href="02_2_Notifiers.html">Notifiers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">03 Recursion</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../03_Recursion/03_1_Recursion.html">Recursion in Object-Oriented Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Recursion/03_2_Refactor.html">Refactoring Repetitive Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">04 Aliasing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_Alias/04_1_Alias.html">Aliasing on Purpose</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">05 Guess and Check</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../05_GuessCheck/05_1_GuessCheck.html">Recursive Guess and Check</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">06 Binary</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_1_Bits.html">Bit Twiddling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_2_NegBits.html">Negative Binary Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_3_Hex.html">What the Hex?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">07 Functional</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../07_Functional/07_1_Functional.html">Sometimes Functions are Values</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">08 Assembler</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../08_Assembler/08_1_Twopass.html">Two Pass Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Assembler/08_2_Regexp.html">Regular expressions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_terms.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_looploop.html">Appendix – What for?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_Special.html">Appendix – Magic Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_style.html">Style Guide for Python Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_internals.html">How Python Works</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/UO-CS-OER/CS210-text/main?urlpath=tree/Intro_to_CS/02_Inheritance/02_1_Inheritance.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/UO-CS-OER/CS210-text" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UO-CS-OER/CS210-text/issues/new?title=Issue%20on%20page%20%2F02_Inheritance/02_1_Inheritance.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/02_Inheritance/02_1_Inheritance.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="../_sources/02_Inheritance/02_1_Inheritance.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Class Hierarchies and Inheritance</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Class Hierarchies and Inheritance</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subclasses">Subclasses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overriding">Overriding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-liskov-substitution-principle">The Liskov Substitution Principle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract-classes">Abstract classes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#check-your-understanding">Check your understanding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#class-diagrams">Class Diagrams</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inheriting-from-built-ins">Inheriting from built-ins</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-your-understanding">Test your understanding</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="class-hierarchies-and-inheritance">
<h1>Class Hierarchies and Inheritance<a class="headerlink" href="#class-hierarchies-and-inheritance" title="Link to this heading">#</a></h1>
<section id="subclasses">
<h2>Subclasses<a class="headerlink" href="#subclasses" title="Link to this heading">#</a></h2>
<p>Sometimes we need a specialized version of
a class, or multiple variations on a class.
Rather than modifying the existing class,
we can create a new class that <em>inherits</em>
from the existing class.</p>
<p>Suppose, for example, that we wanted a
class <code class="docutils literal notranslate"><span class="pre">Square</span></code> that is like a rectangle but
can be created from a single point and a size.
We can specify that a <code class="docutils literal notranslate"><span class="pre">Square</span></code> is a kind of
<code class="docutils literal notranslate"><span class="pre">Rect</span></code>:</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Classes Point and Rect are repeated </span>
<span class="c1"># from the previous chapter so we can</span>
<span class="c1"># build on them.  Point has a method </span>
<span class="c1"># &quot;dist&quot; that we use for area of triangles. </span>

<span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An (x,y) coordinate pair&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Point&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Point(x, y) + Point(&quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_x</span><span class="p">,</span> <span class="n">new_y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the coordinates of this Point&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">new_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">new_y</span>
        
    <span class="k">def</span> <span class="nf">dist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span> 
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Euclidean distance&quot;&quot;&quot;</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span><span class="o">*</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="o">*</span><span class="n">dy</span><span class="p">)</span>       
        
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Looks like (x, y)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">)&quot;</span>
      
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Looks like Point(x, y)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Point(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="k">class</span> <span class="nc">Rect</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rectangle from lower left corner to upper right.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy_min</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">xy_max</span><span class="p">:</span> <span class="n">Point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">xy_min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="n">xy_max</span>
    
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Area is height * width&quot;&quot;&quot;</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="o">.</span><span class="n">x</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">height</span> <span class="o">*</span> <span class="n">width</span>

    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Rect&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;New rectangle offset from this one by delta as movement vector&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Rect(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Rect(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="n">Rect</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Rectangle with equal length sides&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">Number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Square</span></code> objects have the <code class="docutils literal notranslate"><span class="pre">min_pt</span></code> and <code class="docutils literal notranslate"><span class="pre">max_pt</span></code>
<em>instance variables</em> of <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, plus a new
instance variable <code class="docutils literal notranslate"><span class="pre">size</span></code>.<br />
All the methods of <code class="docutils literal notranslate"><span class="pre">Rect</span></code> are also available for
<code class="docutils literal notranslate"><span class="pre">Square</span></code>, including the <em>magic</em> methods like <code class="docutils literal notranslate"><span class="pre">__str__</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">sq</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rect((3, 5), (8, 10))
</pre></div>
</div>
</div>
</div>
</section>
<section id="overriding">
<h2>Overriding<a class="headerlink" href="#overriding" title="Link to this heading">#</a></h2>
<p>Maybe we don’t want <code class="docutils literal notranslate"><span class="pre">print(sq)</span></code> to print a
string beginning with <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.  Maybe we want
<code class="docutils literal notranslate"><span class="pre">Square</span></code> to have its own <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="n">Rect</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Rectangle with equal length sides&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">Number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Square(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>The new <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method of <code class="docutils literal notranslate"><span class="pre">Square</span></code> <em>overrides</em> the
<code class="docutils literal notranslate"><span class="pre">__str__</span></code> method of the <code class="docutils literal notranslate"><span class="pre">Rect</span></code> Now the same code as above</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">sq</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sq</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">sq</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Square((3, 5), 5)
Rect((5, 7), (10, 12))
</pre></div>
</div>
</div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">print</span></code> command uses the new
<code class="docutils literal notranslate"><span class="pre">__str__</span></code> method.
The <code class="docutils literal notranslate"><span class="pre">translate</span></code> method is still inherited from
<code class="docutils literal notranslate"><span class="pre">Rect</span></code>, and still returns a <code class="docutils literal notranslate"><span class="pre">Rect</span></code> object rather
than a <code class="docutils literal notranslate"><span class="pre">Square</span></code>, so the second <code class="docutils literal notranslate"><span class="pre">print</span></code> command
is printing that <code class="docutils literal notranslate"><span class="pre">Rect</span></code> object.</p>
<p>We can also add
new methods that are not present in <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.  For example, we
might simply want to add a method that returns the length
of a side:</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="n">Rect</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Rectangle with equal length sides&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">Number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Square(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">)&quot;</span>
        
    <span class="k">def</span> <span class="nf">side</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1">## Within class Square as above</span>
    <span class="k">def</span> <span class="nf">side</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</pre></div>
</div>
<p>A method that is defined only in the <code class="docutils literal notranslate"><span class="pre">Square</span></code> subclass
can of course use instance variables that are likewise
only in that subclass.   Now we can write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sq</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">sq</span><span class="o">.</span><span class="n">side</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>We get the expected result, <code class="docutils literal notranslate"><span class="pre">2</span></code>.  However, if
we attempt to call <code class="docutils literal notranslate"><span class="pre">side</span></code> on a <code class="docutils literal notranslate"><span class="pre">Rect</span></code> object
that is not a <code class="docutils literal notranslate"><span class="pre">Square</span></code> object, we will get an error
message.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">side</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">r</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">r</span><span class="o">.</span><span class="n">side</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;Rect&#39; object has no attribute &#39;side&#39;
</pre></div>
</div>
</div>
</div>
<p>The Python debugger refers to both instance variables and methods
as <em>attributes</em>.  In this case it looked for the
class of <code class="docutils literal notranslate"><span class="pre">r</span></code> and found it was a <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, and it looked
in class <code class="docutils literal notranslate"><span class="pre">Rect</span></code> for method <code class="docutils literal notranslate"><span class="pre">side</span></code> and did not find it.</p>
<p>The inherited <code class="docutils literal notranslate"><span class="pre">translate</span></code> method still returns a <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.
It seems more reasonable for
translation of a <code class="docutils literal notranslate"><span class="pre">Square</span></code> to give us a <code class="docutils literal notranslate"><span class="pre">Square</span></code>,
so we can again <em>override</em> the
inherited method with a more specialized version:</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span><span class="p">(</span><span class="n">Rect</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Rectangle with equal length sides&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="n">Number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">Point</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Square(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">)&quot;</span>
        
    <span class="k">def</span> <span class="nf">side</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
    
    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Square&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Square</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Square&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Square</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
<p>Now translate produces a <code class="docutils literal notranslate"><span class="pre">Square</span></code> object, with the printed
representation we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">sq</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sq</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">sq</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Square((3, 5), 5)
Square((5, 7), 5)
</pre></div>
</div>
</div>
</div>
</section>
<section id="the-liskov-substitution-principle">
<h2>The Liskov Substitution Principle<a class="headerlink" href="#the-liskov-substitution-principle" title="Link to this heading">#</a></h2>
<p>Can we override methods any way
we like?  For example, could we have have written
the following definition of <code class="docutils literal notranslate"><span class="pre">translate</span></code> for
class <code class="docutils literal notranslate"><span class="pre">Square</span></code>?</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">dy</span><span class="p">:</span> <span class="n">Number</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Square&quot;</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Square</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
<p>Python would allow this, but it is a <em>very bad idea</em>.
In Python, as in many object-oriented languages,
we expect a <em>subclass</em> to also act as a <em>subtype</em>.</p>
<p>What does it mean for one class to be a subtype
of another?  The widely accepted answer is that
a subtype may safely be used wherever its
supertype could be used.  For example, if <code class="docutils literal notranslate"><span class="pre">Square</span></code>
is not only a subclass of <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, but also a
subtype of <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, then any code that would behave
correctly with a value <code class="docutils literal notranslate"><span class="pre">v</span></code> that is a <code class="docutils literal notranslate"><span class="pre">Rect</span></code> should
also act correctly if the value of <code class="docutils literal notranslate"><span class="pre">v</span></code> is a <code class="docutils literal notranslate"><span class="pre">Square</span></code>.
We could say “A <code class="docutils literal notranslate"><span class="pre">Square</span></code>s is a <code class="docutils literal notranslate"><span class="pre">Rect</span></code>s”, and in
fact some programmers call subtyping the <em>is-a</em> relation.
This is also called the <em>Liskov substitution principle</em>,
for Nancy Liskov of M.I.T. who proposed it.</p>
<p>For a <code class="docutils literal notranslate"><span class="pre">Square</span></code> to be usable everywhere a <code class="docutils literal notranslate"><span class="pre">Rect</span></code> is usable,
each method overridden in <code class="docutils literal notranslate"><span class="pre">Square</span></code> must be compatible with
the corresponding method in <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.<br />
What does it mean for the <code class="docutils literal notranslate"><span class="pre">translate</span></code> of <code class="docutils literal notranslate"><span class="pre">Square</span></code> to be
compatible with the <code class="docutils literal notranslate"><span class="pre">translate</span></code> of <code class="docutils literal notranslate"><span class="pre">Rect</span></code>?  Of course it
should have the same number of arguments.  In addition, the
arguments and return value should be compatible.  An argument
in the overriding method is compatible if it accepts everything
that the inherited method accepts, so it should be
equal or a supertype of the argument type of the inherited
method.  The result type should be what we would expect
from the inherited method, so it should be equal or a
subtype of the return type of the inherited method.</p>
<p><img alt="Compatible argument and return types" src="../_images/covariance-contravariance.png" /></p>
</section>
<section id="abstract-classes">
<h2>Abstract classes<a class="headerlink" href="#abstract-classes" title="Link to this heading">#</a></h2>
<p>So far we have used inheritance as a way to avoid
repetitive code by reusing (inheriting) methods
in subclasses.  Considering the Liskov substitution
principle and the way subclasses are treated as
subtypes, you might wonder whether sometimes it
might be useful to create a superclass and a set
of subclasses even though there is little or nothing
to inherit.  Our purpose might be the subtype relation,
knowing (and documenting) that any of the subtypes can
be used where the supertype is expected.
This is not only possible but common.</p>
<p>We have a simple class <code class="docutils literal notranslate"><span class="pre">Rect</span></code> and a subclass
<code class="docutils literal notranslate"><span class="pre">Square</span></code>, and although we overrode many of the
<code class="docutils literal notranslate"><span class="pre">Rect</span></code> methods in <code class="docutils literal notranslate"><span class="pre">Square</span></code>,
at least one method (<code class="docutils literal notranslate"><span class="pre">area</span></code>) is inherited.  Suppose
now we also want a class <code class="docutils literal notranslate"><span class="pre">Triangle</span></code>.  A triangle is not
defined by two corners, and its area is not computed
in the same way as the area of a <code class="docutils literal notranslate"><span class="pre">Rect</span></code>.  And yet
we can write an <code class="docutils literal notranslate"><span class="pre">area</span></code> method, with a completely different
implementation, that is called in the same way and
has the same meaning.  It is easy to imagine a loop
that sums up the area of a mixed lists of triangles and
rectangles.   It is useful for a class
<code class="docutils literal notranslate"><span class="pre">Triangle</span></code> and class <code class="docutils literal notranslate"><span class="pre">Rect</span></code> to be subclasses of a
single superclass <code class="docutils literal notranslate"><span class="pre">Shape</span></code>, even though there may be
nothing that <code class="docutils literal notranslate"><span class="pre">Triangle</span></code> and <code class="docutils literal notranslate"><span class="pre">Rect</span></code> can inherit.</p>
<p>What would this class <code class="docutils literal notranslate"><span class="pre">Shape</span></code> look like?  What could
we do with an object of class <code class="docutils literal notranslate"><span class="pre">Shape</span></code>, if it makes
sense at all to create <code class="docutils literal notranslate"><span class="pre">Shape</span></code> objects?  In fact, even
though we want the <em>class</em> <code class="docutils literal notranslate"><span class="pre">Shape</span></code> to describe
what <code class="docutils literal notranslate"><span class="pre">Rect</span></code>s and <code class="docutils literal notranslate"><span class="pre">Triangle</span></code>s have in common, we probably
don’t want to even make it possible to create a
<code class="docutils literal notranslate"><span class="pre">Shape</span></code> object directly;  all <code class="docutils literal notranslate"><span class="pre">Shape</span></code> objects should
be <code class="docutils literal notranslate"><span class="pre">Rect</span></code>s (including <code class="docutils literal notranslate"><span class="pre">Square</span></code>s) or <code class="docutils literal notranslate"><span class="pre">Triangle</span></code>s.</p>
<p>A class like <code class="docutils literal notranslate"><span class="pre">Shape</span></code> that organizes a set of subclasses
but which can never be instantiated to create objects
by itself is called an <em>abstract base class</em>.  We
might define shape as an abstract base class like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Shape</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An abstract base class that encompasses different concrete</span>
<span class="sd">    classes with common behavior but different representations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;There are *no* objects of an abstract class.  It&#39;s a</span>
<span class="sd">        concept, not a set of concrete things.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Do not instantiate &#39;Shape&#39;; it is abstract&quot;</span><span class="p">)</span>

    <span class="c1"># Abstract methods are mostly to define signatures</span>
    <span class="c1"># (headers) of methods for the concrete subclasses</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2"> didn&#39;t define &#39;Area&#39;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Shape&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;New shape offset from this one by delta as movement vector&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Class </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="si">}</span><span class="s2"> didn&#39;t define &#39;translate&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that this class is booby-trapped to crash if we
make the mistake of trying to create a <code class="docutils literal notranslate"><span class="pre">Shape</span></code> object
directly.  In addition, the methods <code class="docutils literal notranslate"><span class="pre">area</span></code> and <code class="docutils literal notranslate"><span class="pre">translate</span></code>
are also not intended to be inherited.  If they are
inherited (presumably because we forgot to define an
overriding method in a subclass, or perhaps  because
we misspelled it), they will crash with a diagnostic
message!</p>
<p>Now that we have the abstract base class <code class="docutils literal notranslate"><span class="pre">Shape</span></code>, we
want to make <code class="docutils literal notranslate"><span class="pre">Rect</span></code> a subclass of it.  Since we’re
overriding all the methods, we can simply change
the header of the class:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Rect</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
</pre></div>
</div>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Rect</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rectangle from lower left corner to upper right.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy_min</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">xy_max</span><span class="p">:</span> <span class="n">Point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">=</span> <span class="n">xy_min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">=</span> <span class="n">xy_max</span>
    
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Area is height * width&quot;&quot;&quot;</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="o">.</span><span class="n">x</span>
        <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">height</span> <span class="o">*</span> <span class="n">width</span>

    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Rect&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;New rectangle offset from this one by delta as movement vector&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Rect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Rect(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Rect(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_pt</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>We will give a similar header to <code class="docutils literal notranslate"><span class="pre">Triangle</span></code>, and again
override all the methods declared in <code class="docutils literal notranslate"><span class="pre">Shape</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Triangle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A triangle is defined by three points.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">p2</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">p3</span><span class="p">:</span> <span class="n">Point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p3</span> <span class="o">=</span> <span class="n">p3</span>

    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Triangle&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Triangle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p3</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Triangle(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Triangle(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Area of triangle is (1/2) * base * height&quot;&quot;&quot;</span>
        <span class="c1"># To determine height, we drop a perpendicular from one point</span>
        <span class="c1"># to the opposite side, then measure it.  Any side will do;</span>
        <span class="c1"># we&#39;ll take p1 as the point and (p2,p3) as the side.</span>
        <span class="n">ix</span><span class="p">,</span> <span class="n">iy</span> <span class="o">=</span> <span class="n">normal_intersect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">intercept</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span> <span class="n">iy</span><span class="p">)</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">dist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">dist</span><span class="p">(</span><span class="n">intercept</span><span class="p">)</span>
        <span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">base</span> <span class="o">*</span> <span class="n">height</span>
</pre></div>
</div>
</div>
</div>
<p>The area calculation for a triangle is a bit more involved
than the calculation for a rectangle, but fortunately
it was easy to reuse code for dropping a perpendicular that
I developed for a different project, plus a <code class="docutils literal notranslate"><span class="pre">dist</span></code> (distance) method
in the <code class="docutils literal notranslate"><span class="pre">Point</span></code> class.</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">normal_intersect</span><span class="p">(</span><span class="n">p1_x</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">p1_y</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> 
                     <span class="n">p2_x</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">p2_y</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span>
                     <span class="n">px</span><span class="p">:</span> <span class="n">Number</span><span class="p">,</span> <span class="n">py</span><span class="p">:</span> <span class="n">Number</span>
                     <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Number</span><span class="p">,</span> <span class="n">Number</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Intersection of seg from p1 to p2 with normal dropped from p&quot;&quot;&quot;</span>

    <span class="c1"># Special cases: slope or normal slope is undefined</span>
    <span class="c1"># for vertical or horizontal lines, but the intersections</span>
    <span class="c1"># are trivial for those cases</span>
    <span class="k">if</span> <span class="n">p2_x</span> <span class="o">==</span> <span class="n">p1_x</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">p1_x</span><span class="p">,</span> <span class="n">py</span>
    <span class="k">elif</span> <span class="n">p2_y</span> <span class="o">==</span> <span class="n">p1_y</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">px</span><span class="p">,</span> <span class="n">p1_y</span>

    <span class="c1"># The slope of the segment, and of a normal ray</span>
    <span class="n">seg_slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2_y</span> <span class="o">-</span> <span class="n">p1_y</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p2_x</span> <span class="o">-</span> <span class="n">p1_x</span><span class="p">)</span>
    <span class="n">normal_slope</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">seg_slope</span><span class="p">)</span>

    <span class="c1"># For y=mx+b form, we need to solve for b (y intercept)</span>
    <span class="n">seg_b</span> <span class="o">=</span> <span class="n">p1_y</span> <span class="o">-</span> <span class="n">seg_slope</span> <span class="o">*</span> <span class="n">p1_x</span>
    <span class="n">normal_b</span> <span class="o">=</span> <span class="n">py</span> <span class="o">-</span> <span class="n">normal_slope</span> <span class="o">*</span> <span class="n">px</span>

    <span class="c1"># Combining and subtracting the two line equations to solve for intersect</span>
    <span class="n">x_intersect</span> <span class="o">=</span> <span class="p">(</span><span class="n">seg_b</span> <span class="o">-</span> <span class="n">normal_b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">normal_slope</span> <span class="o">-</span> <span class="n">seg_slope</span><span class="p">)</span>
    <span class="n">y_intersect</span> <span class="o">=</span> <span class="n">seg_slope</span> <span class="o">*</span> <span class="n">x_intersect</span> <span class="o">+</span> <span class="n">seg_b</span>
    <span class="c1"># Colinear points are ok!</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">x_intersect</span><span class="p">,</span> <span class="n">y_intersect</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Although <code class="docutils literal notranslate"><span class="pre">Rect</span></code> and <code class="docutils literal notranslate"><span class="pre">Triangle</span></code> do not share any implementation at
all, they both follow the contract defined by the abstract class
<code class="docutils literal notranslate"><span class="pre">Shape</span></code>.   We can loop through a list of <code class="docutils literal notranslate"><span class="pre">Shape</span></code> objects including
both <code class="docutils literal notranslate"><span class="pre">Rect</span></code> and <code class="docutils literal notranslate"><span class="pre">Triangle</span></code> objects and call the <code class="docutils literal notranslate"><span class="pre">area</span></code> method of
each one, letting Python call the <code class="docutils literal notranslate"><span class="pre">Triangle.area</span></code> method for
<code class="docutils literal notranslate"><span class="pre">Triangle</span></code>s and the <code class="docutils literal notranslate"><span class="pre">Rect.area</span></code> method for <code class="docutils literal notranslate"><span class="pre">Rect</span></code>s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shapes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Shape</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> 
            <span class="n">Rect</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span> 
            <span class="n">Square</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">3</span><span class="p">),</span> 
            <span class="n">Triangle</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="p">]</span>
           
<span class="k">for</span> <span class="n">shape</span> <span class="ow">in</span> <span class="n">shapes</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">area</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
9
8.000000000000002
</pre></div>
</div>
</div>
</div>
<p>This is a kind of <em>polymorphism</em>, <em>poly</em> meaning “many”
or “multiple” and <em>morph</em> meaning “form”.  Our <code class="docutils literal notranslate"><span class="pre">Shape</span></code> objects come
in multiple forms, but we can mix them together in a list and call
<code class="docutils literal notranslate"><span class="pre">shape</span></code> on each of them, treating <code class="docutils literal notranslate"><span class="pre">shape</span></code> as a <em>polymorphic</em>
function, provided our classes obey the Liskov substitution principle.</p>
<section id="check-your-understanding">
<h3>Check your understanding<a class="headerlink" href="#check-your-understanding" title="Link to this heading">#</a></h3>
<p>One of these relations is not like the others:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Square</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Rect</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Square</span></code> is a kind of <code class="docutils literal notranslate"><span class="pre">Rect</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Rect</span></code> contains <code class="docutils literal notranslate"><span class="pre">Point</span></code>s</p></li>
</ul>
</section>
<section id="class-diagrams">
<h3>Class Diagrams<a class="headerlink" href="#class-diagrams" title="Link to this heading">#</a></h3>
<p>If we want to communicate the relation between
the <em>superclass</em> <code class="docutils literal notranslate"><span class="pre">Rect</span></code> and <em>subclass</em> <code class="docutils literal notranslate"><span class="pre">Square</span></code>,
there is a more-or-less standard diagrammatic
notation called a <em>class diagram</em> that indicates
the relation with an arrow:</p>
<p><img alt="Class diagram: Square is a subclass of Rect" src="../_images/class_diagram_square.svg" /></p>
<p>The arrow expresses the “is-a” relation (a square <em>is-a</em> rectangle).
Sometimes it is also useful to express the “has-a” relation,
for example showing that one or more <code class="docutils literal notranslate"><span class="pre">Point</span></code> objects are
instance variables of a <code class="docutils literal notranslate"><span class="pre">Rect</span></code> object.</p>
<p><img alt="Class diagram with has-a: Rect has-a Point" src="../_images/class_diagram_square_point.svg" /></p>
<p>A class diagram to express the relation
among <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, <code class="docutils literal notranslate"><span class="pre">Square</span></code>, and <code class="docutils literal notranslate"><span class="pre">Point</span></code> may
not be very useful, as the structure is
simple and apparent from the code.<br />
Diagrams may be useful when the relations
are more complex, particularly when it becomes
difficult to describe them precisely,
concisely, and clearly in prose.  A diagram
expressing showing relations among <code class="docutils literal notranslate"><span class="pre">Shape</span></code>,
<code class="docutils literal notranslate"><span class="pre">Rect</span></code>, and <code class="docutils literal notranslate"><span class="pre">Square</span></code> is slightly more
useful:</p>
<p><img alt="Class diagram with an abstract base class" src="../_images/class_diagram_triangle.svg" /></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="inheriting-from-built-ins">
<h1>Inheriting from built-ins<a class="headerlink" href="#inheriting-from-built-ins" title="Link to this heading">#</a></h1>
<p>All the built-in types of Python, like <code class="docutils literal notranslate"><span class="pre">str</span></code>
and <code class="docutils literal notranslate"><span class="pre">dict</span></code> and even <code class="docutils literal notranslate"><span class="pre">int</span></code>, are classes.  Just
as we were able to extend or <em>inherit from</em>
the class <code class="docutils literal notranslate"><span class="pre">Rect</span></code>, it is occasionally useful to
inherit from one of the built-in classes.</p>
<p>Suppose we want to build a class to represent lists
of shapes.   One approach would be to <em>wrap</em> a list,
i.e., keeping a list of <code class="docutils literal notranslate"><span class="pre">Shape</span></code> as an instance variable in
the new class:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ShapeList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A collection of Shapes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">el</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">total</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Rect</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delegate to elements&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delegate to elements&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is ok as far as it goes … it allows us to append
<code class="docutils literal notranslate"><span class="pre">Shape</span></code> objects to the list, to print the list with the
<code class="docutils literal notranslate"><span class="pre">str</span></code> function, and to get the total area of shapes in the
list.  But then perhaps we want to use the <code class="docutils literal notranslate"><span class="pre">len</span></code> function
to see how many shapes are on the list, so we’ll need to
write a method to delegate <code class="docutils literal notranslate"><span class="pre">len</span></code>.  Next we might want to
use the <code class="docutils literal notranslate"><span class="pre">in</span></code> operation to check whether a shape is in the list.
If we want <em>all</em> the methods of <code class="docutils literal notranslate"><span class="pre">list</span></code>, we will end up
with a rather large class definition just to delegate each
method to the corresponding method of <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>Wrapping is fine if we want just a few methods of <code class="docutils literal notranslate"><span class="pre">list</span></code>,
especially if we specifically do <em>not</em> want some of the
<code class="docutils literal notranslate"><span class="pre">list</span></code> methods to be available for <code class="docutils literal notranslate"><span class="pre">ShapeList</span></code>.  But if we
want all of them, it is simpler (and probably less error prone)
to just inherit them from <code class="docutils literal notranslate"><span class="pre">list</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ShapeList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A collection of Shapes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Number</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">el</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
<p>We only have to define the added method <code class="docutils literal notranslate"><span class="pre">area</span></code>; all the
rest of the methods <code class="docutils literal notranslate"><span class="pre">list</span></code> can be inherited.<br />
Note especially that we were able to write <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">el</span> <span class="pre">in</span> <span class="pre">self</span></code>,
using the looping methods of the built-in <code class="docutils literal notranslate"><span class="pre">list</span></code> class.
Now we can write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">li</span> <span class="o">=</span> <span class="n">ShapeList</span><span class="p">()</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Rect</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)))</span>  <span class="c1"># 2x4 = 8</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Square</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>           <span class="c1"># 2x2 = 4</span>
<span class="n">li</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Triangle</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>  <span class="c1"># Area 1</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ShapeList </span><span class="si">{</span><span class="n">li</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Combined area is </span><span class="si">{</span><span class="n">li</span><span class="o">.</span><span class="n">area</span><span class="p">()</span><span class="si">}</span><span class="s2">, expecting 13&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ShapeList [Rect(Point(3, 3), Point(5, 7), Rect(Point(2, 2), Point(4, 4), Triangle(Point(0, 0), Point(0, 1), Point(2, 0))]
Combined area is 13.0, expecting 13
</pre></div>
</div>
</div>
</div>
<section id="test-your-understanding">
<h2>Test your understanding<a class="headerlink" href="#test-your-understanding" title="Link to this heading">#</a></h2>
<p>We might choose to extend a built-in class like
<code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">dict</span></code> because</p>
<ul class="simple">
<li><p>We want to change the way all lists work</p></li>
<li><p>We want a class with all the methods of the
built-in class, plus one or more added methods</p></li>
<li><p>Instance variables can’t hold values from the
built-in classes</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "UO-CS-OER/CS210-text",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./02_Inheritance"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../01-Objects/01-1-Objects.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Objects</p>
      </div>
    </a>
    <a class="right-next"
       href="02_2_Notifiers.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Notifiers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Class Hierarchies and Inheritance</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subclasses">Subclasses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overriding">Overriding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-liskov-substitution-principle">The Liskov Substitution Principle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract-classes">Abstract classes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#check-your-understanding">Check your understanding</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#class-diagrams">Class Diagrams</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inheriting-from-built-ins">Inheriting from built-ins</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-your-understanding">Test your understanding</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michal Young, Boyana Norris, and Ram Durairajan
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022, 2023 University of Oregon.  Creative Commons Share-Alike Attribution license.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>