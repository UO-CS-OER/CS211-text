
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Sometimes Functions are Values &#8212; Introduction to Computer Science II</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '07_Functional/07_1_Functional';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Two Pass Algorithms" href="../08_Assembler/08_1_Twopass.html" />
    <link rel="prev" title="What the Hex?" href="../06_Binary/06_3_Hex.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-provisional.png" class="logo__image only-light" alt="Introduction to Computer Science II - Home"/>
    <img src="../_static/logo-provisional.png" class="logo__image only-dark pst-js-only" alt="Introduction to Computer Science II - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction to Computer Science, part 2
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">00 Preliminaries</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-01-Prospectus.html">A Course in Computational Thinking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-02-Install.html">Installing Python and IDLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00-Preliminaries/00-03-Install_IDE.html">Installing an Interactive Development Environment (IDE)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">01 Objects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01-Objects/01_1_Objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Objects/01_2_Project.html">Project:  Overlapping Appointments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">02 Inheritance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02_Inheritance/02_1_Inheritance.html">Class Hierarchies and Inheritance</a></li>

<li class="toctree-l1"><a class="reference internal" href="../02_Inheritance/02_2_Notifiers.html">Notifiers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">03 Recursion</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../03_Recursion/03_1_Recursion.html">Recursion in Object-Oriented Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Recursion/03_2_Refactor.html">Refactoring Repetitive Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">04 Aliasing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_Alias/04_1_Alias.html">Aliasing on Purpose</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">05 Guess and Check</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../05_GuessCheck/05_1_GuessCheck.html">Recursive Guess and Check</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">06 Binary</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_1_Bits.html">Bit Twiddling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_2_NegBits.html">Negative Binary Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Binary/06_3_Hex.html">What the Hex?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">07 Functional</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Sometimes Functions are Values</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">08 Assembler</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../08_Assembler/08_1_Twopass.html">Two Pass Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Assembler/08_2_Regexp.html">Regular expressions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_terms.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_looploop.html">Appendix – What for?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_Special.html">Appendix – Magic Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_style.html">Style Guide for Python Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendices/appendix_internals.html">How Python Works</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/UO-CS-OER/CS210-text/main?urlpath=tree/Intro_to_CS/07_Functional/07_1_Functional.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/UO-CS-OER/CS210-text" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UO-CS-OER/CS210-text/issues/new?title=Issue%20on%20page%20%2F07_Functional/07_1_Functional.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/07_Functional/07_1_Functional.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="../_sources/07_Functional/07_1_Functional.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Sometimes Functions are Values</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#when-should-we-use-functions-as-values">When should we use functions as values?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functional-programming-in-python">Functional Programming in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lambda-is-just-shorthand">Lambda is just shorthand</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#beyond-sum-reduce">Beyond sum:  Reduce</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#walking-a-tree-with-a-function-value">Walking a tree with a function value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-as-needed-don-t-get-carried-away">Use as needed; Don’t get carried away</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-s-more">There’s more</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#source-code">Source Code</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="sometimes-functions-are-values">
<h1>Sometimes Functions are Values<a class="headerlink" href="#sometimes-functions-are-values" title="Link to this heading">#</a></h1>
<p>Our project for week 7 largely builds on
concepts introduced earlier in the term,
especially bitfield packing and unpacking but
also objects with other objects as fields
(e.g., the ALU and registers are part of the CPU,
and the
Memory is attached (“wired”) to the CPU in the
main program), the Model-View-Controller pattern
attaching a graphical display to the CPU and memory
state, some careful sequential logic to
update the program counter register at the right
point in the execution cycle.</p>
<p>One small part that may seem unfamiliar is the
way the ALU executes operations by looking them
up in a table.  We have actually seen similar
techniques a couple times before:</p>
<ul class="simple">
<li><p>In the Agenda project, we passed a function to the
built-in <code class="docutils literal notranslate"><span class="pre">sort</span></code> method to order appointments by
start time:
<code class="docutils literal notranslate"><span class="pre">self.elements.sort(key=lambda</span> <span class="pre">appt:</span> <span class="pre">appt.start)</span></code></p></li>
<li><p>In the Calculator project, we used a table of classes to avoid
repetitive code while parsing the postfix expressions:
<code class="docutils literal notranslate"><span class="pre">stack.append(BINOPS[tok.kind](left,</span> <span class="pre">right))</span></code>
We called the classes in the
<code class="docutils literal notranslate"><span class="pre">BINOPS</span></code> and <code class="docutils literal notranslate"><span class="pre">UNOPS</span></code> tables to create
objects of the classes corresponding to each symbol like
<code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p></li>
</ul>
<p>In our simulation of the arithmetic logic unit (ALU) of the
Duck Machine, we will use a table in which the keys are
numeric operation codes and the values are functions indicated
by those codes.  This is very analogous to the circuitry
called a “multiplexer” that selects connections based on the
values (1 or 0, positive voltage or no voltage) on some of its
input wires.</p>
<section id="when-should-we-use-functions-as-values">
<h2>When should we use functions as values?<a class="headerlink" href="#when-should-we-use-functions-as-values" title="Link to this heading">#</a></h2>
<p>Some programming languages allow us to treat functions as
values.  We can store functions in variables, pass functions to other
functions, return functions from functions, etc.  When we can
do this, we say that functions are <em>first class values</em> in
the programming language.  Python is such a language.</p>
<p>In some other programming languages you will learn, functions may
not be first class values.  Java, for example, has methods but
not functions, and methods are not first class values (although
recently a limited kind of first class function value,
called a <em>lambda expression</em>, was added to Java).<br />
In C you will encounter
<em>function pointers</em>, which are first class values, although they
are a little trickier to define and
use than function objects in Python.  Each language you learn may be
a little different in terms of whether and how you can treat
functions as values.</p>
<p>We use functions as values for some of the same reasons we use
classes and subclasses in object oriented languages:  To simplify
and generalize code, avoiding redundancy by factoring out
the parts that are repetitive. Classes and subclasses may be
more useful in some situations, and functions as values may be
more useful in others:</p>
<ul class="simple">
<li><p>Classes and subclasses are especially useful when there is a
natural subtype hierarchy to organize variation, such as
organizing our calculator expression classes as binary and
unary operations.   The object-oriented style is also useful
when we maintain complex state, such as the fields of
appointment objects in our agenda project.</p></li>
<li><p>Functions as values are sometimes more useful than classes
when functions are natural building blocks, especially when
we don’t have as much need to maintain complex state.
Functions also make good building blocks even if state is complex
but more uniform than the functions we want to apply.</p></li>
</ul>
<p>Sometimes either approach would be about equally applicable.<br />
For example, in our calculator project, instead of creating
several subclasses of the <code class="docutils literal notranslate"><span class="pre">BinOp</span></code> class, we could have created
a single class with an instance variable holding the function
to be applied.  The code would have been a little shorter,
but whether it would have been simpler is arguable.</p>
</section>
<section id="functional-programming-in-python">
<h2>Functional Programming in Python<a class="headerlink" href="#functional-programming-in-python" title="Link to this heading">#</a></h2>
<p>Python supports both an object-oriented style of programming
and a functional style of programming.  The object-oriented
style is more common in large projects, but sometimes
the functional style is just the tool we need to
greatly simplify some code.  Two particularly useful
tricks of the trade are storing functions in tables
(dicts) and passing functions to functions or methods.</p>
<section id="lambda-is-just-shorthand">
<h3>Lambda is just shorthand<a class="headerlink" href="#lambda-is-just-shorthand" title="Link to this heading">#</a></h3>
<p>Often when you encounter functions as values, they are
written as lambda expressions, e.g., <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></code>.
There is nothing complex or mysterious about lambda.  It
is just shorthand for the familiar function function
definition, e.g.,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The lambda expression doesn’t have a name, but it is easy
enough to give it one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The two definitions of <code class="docutils literal notranslate"><span class="pre">f</span></code> above, with a conventional function definition
and with a lambda expression assigned to variable <code class="docutils literal notranslate"><span class="pre">f</span></code>, do
precisely the same thing.  We simply use the lambda expression
to avoid writing out the longer function definition, when
it fits on one line, and especially
when it doesn’t need a name.</p>
</section>
<section id="beyond-sum-reduce">
<h3>Beyond sum:  Reduce<a class="headerlink" href="#beyond-sum-reduce" title="Link to this heading">#</a></h3>
<p>You may know that you can add up the elements of a list with the
<code class="docutils literal notranslate"><span class="pre">sum</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">15</span>
</pre></div>
</div>
<p>What if we wanted to instead multiply all the elements,
or count them?   We can write a single function for all
of these, passing in the function by which the elements
are all combined to obtain a single summary value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">initial</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Reduce l by f, i.e., f(el, f(el, f(el, ...))) for el in l&quot;&quot;&quot;</span>
    <span class="n">reduction</span> <span class="o">=</span> <span class="n">initial</span>
    <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="n">reduction</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">reduction</span><span class="p">,</span> <span class="n">el</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reduction</span>
</pre></div>
</div>
<p>The type hints are unwieldy (and would have been even more
unwieldy if I had written a version that works for all kinds
of lists, not just lists of <code class="docutils literal notranslate"><span class="pre">int</span></code>), but the code is simple:
It just keeps applying a function over and over to distill the
list to a single value.   To get a sum, I pass in a function
(which I can write compactly using<code class="docutils literal notranslate"><span class="pre">lambda</span></code>) to add elements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># Reduce with + is same as sum</span>
<span class="k">assert</span> <span class="n">reduce</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span>
</pre></div>
</div>
<p>If instead I want the product of all the elements,
I pass in a function that multiplies:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reduce with * is product of all elements</span>
<span class="k">assert</span> <span class="n">reduce</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="mi">120</span>
</pre></div>
</div>
<p>If I want to just count the elements, I can ignore the
values and just add one at each step:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Trickier!  We can also get a &#39;count&#39; function</span>
<span class="k">assert</span> <span class="n">reduce</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Of course I am not limited to short nameless functions
written with lambda.  I can find a maximum or minimum
if I a careful about what to use as an initial value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Max, min, or some other selection</span>
<span class="k">def</span> <span class="nf">larger</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;For demo purposes only; built-in max is preferable&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span> <span class="k">return</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="k">assert</span> <span class="n">reduce</span><span class="p">(</span><span class="n">li</span><span class="p">,</span> <span class="n">li</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">larger</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="walking-a-tree-with-a-function-value">
<h3>Walking a tree with a function value<a class="headerlink" href="#walking-a-tree-with-a-function-value" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">reduce</span></code> function described above was intriguing, but
not really very useful since Python already gives us many
reductions on lists including <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, etc.  However,
we can use the same basic technique with other data structures,
where the built-in Python functions are not applicable.<br />
Let’s consider a simple tree of integers with a <code class="docutils literal notranslate"><span class="pre">reduce</span></code>
method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Tree</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The abstract base class&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span>
               <span class="n">leaf_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;f is a function for combining values of subtrees.</span>
<span class="sd">        Leaves will return their own value unless leaf_val</span>
<span class="sd">        is specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Each subclass must implement reduce&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Leaf</span><span class="p">(</span><span class="n">Tree</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span>
               <span class="n">leaf_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">leaf_val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">leaf_val</span>

<span class="k">class</span> <span class="nc">Inner</span><span class="p">(</span><span class="n">Tree</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="p">:</span> <span class="n">Tree</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="n">Tree</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

    <span class="k">def</span> <span class="nf">reduce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span>
               <span class="n">leaf_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">leaf_val</span><span class="p">),</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">leaf_val</span><span class="p">))</span>
</pre></div>
</div>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">reduce</span></code> method with a function argument
to implement different ways of summarizing values of the
leaves, just as we did for a list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Inner</span><span class="p">(</span><span class="n">Inner</span><span class="p">(</span><span class="n">Leaf</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Leaf</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
          <span class="n">Inner</span><span class="p">(</span><span class="n">Leaf</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">Inner</span><span class="p">(</span><span class="n">Leaf</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">Leaf</span><span class="p">(</span><span class="mi">5</span><span class="p">))))</span>

<span class="c1"># Sum leaves of tree</span>
<span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">:</span> <span class="n">v</span><span class="o">+</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span>
<span class="c1"># Product of leaves of tree</span>
<span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">:</span> <span class="n">v</span><span class="o">*</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="mi">120</span>
<span class="c1"># Max/Min leaf of tree using built-in max and min</span>
<span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="nb">max</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
<span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="nb">min</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="c1"># Count leaves</span>
<span class="k">assert</span> <span class="n">t</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">leaf_val</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="use-as-needed-don-t-get-carried-away">
<h3>Use as needed; Don’t get carried away<a class="headerlink" href="#use-as-needed-don-t-get-carried-away" title="Link to this heading">#</a></h3>
<p>Function values are powerful, and sometimes they are just
the right tool for the job.  Other times, you can accomplish
the same thing with simpler approaches.  Many programmers
find it difficult to read code that uses function values
extensively.</p>
<p>Functions or methods that take functions as arguments can be
most useful when one such function can be used in place of
several.  For example, if I only needed a method to sum
the leaves of a tree, I would write a (recursive) <code class="docutils literal notranslate"><span class="pre">sum</span></code> method,
and not a general <code class="docutils literal notranslate"><span class="pre">reduce</span></code> method.  But if I need <code class="docutils literal notranslate"><span class="pre">sum</span></code> and
<code class="docutils literal notranslate"><span class="pre">product</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> and <code class="docutils literal notranslate"><span class="pre">min</span></code>, then a single <code class="docutils literal notranslate"><span class="pre">reduce</span></code> method
becomes an attractive option.</p>
<p>We have seen this in our prior projects that used function
arguments and tables of functions or classes.  The table of
classes in our calculator project replaced a chain of
redundant <code class="docutils literal notranslate"><span class="pre">elif</span></code> …
<code class="docutils literal notranslate"><span class="pre">elif</span></code> … <code class="docutils literal notranslate"><span class="pre">elif</span></code> clauses in our parser, so it was worthwhile.
The table of operation functions in the ALU class for the
Duck Machine simulator likewise allows us to avoid a chain
of largely repetitive code.<br />
The <code class="docutils literal notranslate"><span class="pre">key=</span></code> function argument to <code class="docutils literal notranslate"><span class="pre">sort</span></code> saves us from more
complex ways of controlling the sort function.  Using functions
as values (in tables, and as arguments to methods or functions)
is worthwhile in these contexts.</p>
</section>
<section id="there-s-more">
<h3>There’s more<a class="headerlink" href="#there-s-more" title="Link to this heading">#</a></h3>
<p>There is much more you can do with functions as values
in Python.  For example, frameworks for web applications, like
Django and Flask, create a table of functions for handling
different URLs.  Both Django and Flask use Python <em>decorators</em>,
which are functions that operate on other Python functions.
Don’t worry if that sounds confusing … it’s not something we’re
going to do in CIS 211.  But they are there for you sometime
in the future when you need them.</p>
<p>You can program for years in Python only occasionally encountering
functions as values, and maybe managing to use them without
really understanding them.  In some other languages, functions as
values play a much more central role.  If you write web application
code that executes in the browser, you are likely to encounter
JavaScript code that uses functions as values.  You may also
encounter some programming languages, like ML or Haskell, that
are called “functional languages” because functions that
combine other functions are as central to them as classes and
objects are to Python.</p>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>Sometimes using a function as a value, in a table or passed
as an argument to another function, can greatly simplify your
code and remove redundancy.  Python is primarily an object-oriented
language, not a functional language, and most of the time
classes and objects give us the tools we need to solve problems.
But sometimes a little bit of functional programming is a
powerful addition.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading">#</a></h2>
<p><a class="reference download internal" download="" href="../_downloads/cea4a9baa50363e1dc08cca3b58e744d/functional.py"><span class="xref download myst">Sample code for this chapter</span></a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "UO-CS-OER/CS210-text",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./07_Functional"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../06_Binary/06_3_Hex.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">What the Hex?</p>
      </div>
    </a>
    <a class="right-next"
       href="../08_Assembler/08_1_Twopass.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Two Pass Algorithms</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#when-should-we-use-functions-as-values">When should we use functions as values?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functional-programming-in-python">Functional Programming in Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lambda-is-just-shorthand">Lambda is just shorthand</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#beyond-sum-reduce">Beyond sum:  Reduce</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#walking-a-tree-with-a-function-value">Walking a tree with a function value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-as-needed-don-t-get-carried-away">Use as needed; Don’t get carried away</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-s-more">There’s more</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#source-code">Source Code</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michal Young
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2025 University of Oregon.  Creative Commons Share-Alike Attribution license.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>